{% extends "class/pdf_base.html" %} {% load static %} {% block title %}
Pdf-Viewer {% endblock %} {% block style %} {% endblock %} {% block body %}


<div id="my_pdf_viewer">
  <nav class="pdf-nav" id="navigation_controls">
    <div class="nav-controls">
      <div class="page-controls">
        <!--<a href="" id="go_previous" class="pdf-controls"><i class='bx bxs-chevron-left-circle' ></i></a>-->
        <button id="go_previous" class="pdf-controls">
          <i class="bx bx-chevron-left-circle" style="font-size: 20px"></i>
        </button>
        <input
          id="current_page"
          value="1"
          type="number"
          class="pdf-controls-text"
        />
        <button id="go_next" class="pdf-controls">
          <i class="bx bx-chevron-right-circle" style="font-size: 20px"></i>
        </button>
      </div>

        <button id="zoom_out" class="zoom-controls">
          <i class="bx bx-zoom-out" style="font-size: 25px"></i>
        </button>
        <button id="zoom_in" class="zoom-controls">
          <i class="bx bx-zoom-in" style="font-size: 25px"></i>
        </button>

    </div>
  </nav>
  <div id="canvas_container">
    <canvas id="pdf_renderer"></canvas>
  </div>
</div>



<script>
  var myState = {
    pdf: null,
    currentPage: 1,
    zoom: 1.2,
  };

  pdfjsLib
    .getDocument(
      "../../static/documents/Cse327_quiz1_Md.Tawfiq-Uz-Zaman_1812832042.pdf"
    )
    .then((pdf) => {
      myState.pdf = pdf;
      render();
    });

  function render() {
    myState.pdf.getPage(myState.currentPage).then((page) => {
      var canvas = document.getElementById("pdf_renderer");
      var ctx = canvas.getContext("2d");

      var viewport = page.getViewport(myState.zoom);

      canvas.width = viewport.width;
      canvas.height = viewport.height;

      page.render({
        canvasContext: ctx,
        viewport: viewport,
      });
    });
  }

  document.getElementById("go_previous").addEventListener("click", (e) => {
    if (myState.pdf == null || myState.currentPage == 1) return;
    myState.currentPage -= 1;
    document.getElementById("current_page").value = myState.currentPage;
    render();
  });

  document.getElementById("go_next").addEventListener("click", (e) => {
    if (
      myState.pdf == null ||
      myState.currentPage > myState.pdf._pdfInfo.numPages
    )
      return;
    myState.currentPage += 1;
    document.getElementById("current_page").value = myState.currentPage;
    render();
  });

  document.getElementById("current_page").addEventListener("keypress", (e) => {
    if (myState.pdf == null) return;

    // Get key code
    var code = e.keyCode ? e.keyCode : e.which;

    // If key code matches that of the Enter key
    if (code == 13) {
      var desiredPage = document.getElementById("current_page").valueAsNumber;

      if (desiredPage >= 1 && desiredPage <= myState.pdf._pdfInfo.numPages) {
        myState.currentPage = desiredPage;
        document.getElementById("current_page").value = desiredPage;
        render();
      }
    }
  });

  document.getElementById("zoom_in").addEventListener("click", (e) => {
    if (myState.pdf == null) return;
    myState.zoom += 0.5;
    render();
  });

  document.getElementById("zoom_out").addEventListener("click", (e) => {
    if (myState.pdf == null) return;
    myState.zoom -= 0.5;
    render();
  });
</script>
{% endblock %}
